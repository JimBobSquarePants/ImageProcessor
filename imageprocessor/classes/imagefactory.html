---
title: ImageFactory
heading: ImageFactory
subheading: The core class for image manipulation.
sublinks: ["#about|About",
"#example|Example Code",
"#extending|Extending ImageProcessor"]
---
<section id="about">
    <h1>ImageFactory</h1>
    <p>
        The ImageFactory class provides methods to perform various manipulation functions on a given image. It has been carefully designed to prevent the
        various memory leaks that commonly occur when dealing with images in a performant manner. This makes it safe to use on both Desktop and Web environments.
    </p>
    <p>
        The API for the ImageFactory class is fluent which allows you to easily chain methods to deliver the desired output.
        For example, the following code loads, resizes, sets the format and saves the MemoryStream containing image information.
    </p>
</section>
<hr />
<section id="example">
    <h2>Example Code</h2>

    <pre class="language-csharp"><code>
byte[] photoBytes = File.ReadAllBytes(file);
ISupportedImageFormat format = new JpegFormat { Quality = 70 };
Size size = new Size(150, 0)
using (MemoryStream inStream = new MemoryStream(photoBytes))
{
    using (MemoryStream outStream = new MemoryStream())
    {
        // Initialize the ImageFactory using the overload to preserve EXIF metadata.
        using (ImageFactory imageFactory = new ImageFactory(preserveExifData:true))
        {
            // Load, resize, set the format and quality and save an image.
            imageFactory.Load(inStream)
                        .Resize(size)
                        .Format(format)
                        .Save(outStream);
        }
        // Do something with the stream.
    }
}</code></pre>
</section>
<hr />
<section id="extending">
    <h1>Extending ImageProcessor</h1>
    <p>
        ImageProcessor is built with extensibility in mind. All the individual processors used within the ImageFactory methods
        follow an interface <code>IGraphicsprocessor</code> which allows developers to easily extend the library.
        View the <a href="https://github.com/JimBobSquarePants/ImageProcessor/tree/master/src/ImageProcessor/Processors">source code</a> to see examples.
    </p>
    <pre class="language-csharp"><code>/// &lt;summary&gt;
/// Defines properties and methods for ImageProcessor Plugins.
/// &lt;/summary&gt;
public interface IGraphicsProcessor
{
    /// &lt;summary&gt;
    /// Gets or sets the DynamicParameter.
    /// &lt;/summary&gt;
    dynamic DynamicParameter { get; set; }
    /// &lt;summary&gt;
    /// Gets or sets any additional settings required by the processor.
    /// &lt;/summary&gt;
    Dictionary&lt;string, string&gt; Settings { get; set; }
 
    /// &lt;summary&gt;
    /// Processes the image.
    /// &lt;/summary&gt;
    /// &lt;param name="factory"&gt;
    /// The current instance of the &lt;see cref="T:ImageProcessor.ImageFactory" /&gt; class 
    /// containing the image to process.
    /// &lt;/param&gt;
    /// &lt;returns&gt;
    /// The processed image from the current instance of the 
    /// &lt;see cref="T:ImageProcessor.ImageFactory" /&gt; class.
    /// &lt;/returns&gt;
    Image ProcessImage(ImageFactory factory);
}</code></pre>
    <p>
        It is also possible to extend the image formats that ImageProcessor is capable of manipulating by providing a new class implementing
        the <code>ISupportedImageFormat</code> interface. ImageProcessor will automatically search for classes implementing that interface when initializing.
        View the <a href="https://github.com/JimBobSquarePants/ImageProcessor/tree/master/src/ImageProcessor/Imaging/Formats">source code</a> to see examples.
    </p>
    <pre class="language-csharp"><code>/// &lt;summary&gt;
/// The SupportedImageFormat interface providing information about image 
/// formats to ImageProcessor.
/// &lt;/summary&gt;
public interface ISupportedImageFormat
{
    /// &lt;summary&gt;
    /// Gets the file headers.
    /// &lt;/summary&gt;
    byte[][] FileHeaders { get; }
    /// &lt;summary&gt;
    /// Gets the list of file extensions.
    /// &lt;/summary&gt;
    string[] FileExtensions { get; }
    /// &lt;summary&gt;
    /// Gets the standard identifier used on the Internet to indicate the type 
    /// of data that a file contains. 
    /// &lt;/summary&gt;
    string MimeType { get; }
    /// &lt;summary&gt;
    /// Gets the default file extension.
    /// &lt;/summary&gt;
    string DefaultExtension { get; }
    /// &lt;summary&gt;
    /// Gets the file format of the image. 
    /// &lt;/summary&gt;
    ImageFormat ImageFormat { get; }
    /// &lt;summary&gt;
    /// Gets or sets a value indicating whether the image format is indexed.
    /// &lt;/summary&gt;
    bool IsIndexed { get; set; }
    /// &lt;summary&gt;
    /// Gets or sets the quality of output for images.
    /// &lt;/summary&gt;
    int Quality { get; set; }

    #region Methods
    /// &lt;summary&gt;
    /// Applies the given processor the current image.
    /// &lt;/summary&gt;
    /// &lt;param name="processor"&gt;
    /// The processor delegate.
    /// &lt;/param&gt;
    /// &lt;param name="factory"&gt;
    /// The &lt;see cref="ImageFactory" /&gt;.
    /// &lt;/param&gt;
    void ApplyProcessor(Func&lt;imagefactory, image&gt; processor, ImageFactory factory);
    /// &lt;summary&gt;
    /// Loads the image to process. 
    /// &lt;/summary&gt;
    /// &lt;param name="stream"&gt;
    /// The &lt;see cref="T:System.IO.Stream" /&gt; containing the image information.
    /// &lt;/param&gt;
    /// &lt;returns&gt;
    /// The &lt;see cref="T:System.Drawing.Image" /&gt;.
    /// &lt;/returns&gt;
    Image Load(Stream stream);
    /// &lt;summary&gt;
    /// Saves the current image to the specified output stream.
    /// &lt;/summary&gt;
    /// &lt;param name="stream"&gt;
    /// The &lt;see cref="T:System.IO.Stream" /&gt; to save the image information to.
    /// &lt;/param&gt;
    /// &lt;param name="image"&gt;
    /// The &lt;see cref="T:System.Drawing.Image" /&gt; to save.
    /// &lt;/param&gt;
    /// &lt;returns&gt;
    /// The &lt;see cref="T:System.Drawing.Image" /&gt;.
    /// &lt;/returns&gt;
    Image Save(Stream stream, Image image);
    /// &lt;summary&gt;
    /// Saves the current image to the specified file path.
    /// &lt;/summary&gt;
    /// &lt;param name="path"&gt;The path to save the image to.&lt;/param&gt;
    /// &lt;param name="image"&gt;
 
    /// The &lt;see cref="T:System.Drawing.Image" /&gt; to save.
    /// &lt;/param&gt;
    /// &lt;returns&gt;
    /// The &lt;see cref="T:System.Drawing.Image" /&gt;.
    /// &lt;/returns&gt;
    Image Save(string path, Image image);
    #endregion
}</code></pre>
</section>
